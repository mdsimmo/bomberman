# -------------------------------------------------------------------- #
#                                                                      #
#                   BOMBERMAN GAMES DIRECTORY                          #
#                                                                      #
#   This directory contains all games that will be loaded. Each        #
#   game has a single zip file called <name>.game.zip. The game        #
#   file contains the schema and all configuration.                    #
#                                                                      #
#   DO NOT UNZIP GAME FILES - Unzipped files will not be loaded.       #
#                                                                      #
#   To share a game, simple share the game's zip file. Others can      #
#   download the file into `games/templates` and create copies with    #
#            \bm create <name> -schem=t:<file>.game.zip                #
#                                                                      #
#   Most configuration of a game can be done using:                    #
#            \bm configure <name>                                      #
#   Advanced configuration can be done by opening .game.zip, and       #
#   editing settings.yml. This file contains the default settings      #
#   and explains each setting.                                         #
#                                                                      #
#   This file is automatically generated and will be reset on next     #
#   server reload.                                                     #
#                                                                      #
# -------------------------------------------------------------------- #


settings:
  ==: io.github.mdsimmo.bomberman.game.GameSettings

  # How many lives each player gets
  lives: 3
  # The item type to use for bomb size calculations
  power: minecraft:gunpowder
  # The block type which explodes
  bomb: minecraft:tnt
  # The block type used for flames from tnt
  fire: minecraft:fire

  # What each player spawns in the game with
  # The item order is preserved in players inventory; pad with nulls
  initial-items:
    - ==: org.bukkit.inventory.ItemStack
      v: 2230
      type: TNT
      amount: 3

  # How long before tnt explodes
  fuse-ticks: 40
  # The duration that tnt flames should remain for
  fire-ticks: 20
  # How long before a player can take a second hit
  immunity-ticks: 21

  # What each block type should drop.
  # Each set of materials has a list of Item stacks mapped to a weighting.
  # Materials without an entry will not drop anything.
  loot-table:
    - blocks:
        - minecraft:snow_block
        - minecraft:dirt
        - minecraft:sand
      loot:
        - weight: 4   # The relative weighting of choosing this item
          item:         # What item to drop
            ==: org.bukkit.inventory.ItemStack
            v: 2230
            type: TNT
        - weight: 100
          item:
            ==: org.bukkit.inventory.ItemStack
            v: 2230
            type: AIR
            amount: 0   # amount 0 means "no drop"
        - weight: 3
          item:
            ==: org.bukkit.inventory.ItemStack
            v: 2230
            type: GUNPOWDER
        - weight: 1
          item:
            ==: org.bukkit.inventory.ItemStack
            v: 2230
            type: POTION
            meta:
              ==: ItemMeta
              meta-type: POTION
              potion-type: minecraft:healing
        - weight: 1
          item:
            ==: org.bukkit.inventory.ItemStack
            v: 2230
            type: POTION
            meta:
              ==: ItemMeta
              meta-type: POTION
              potion-type: minecraft:strong_swiftness
        - weight: 1
          item:
            ==: org.bukkit.inventory.ItemStack
            v: 2230
            type: POTION
            meta:
              ==: ItemMeta
              meta-type: POTION
              potion-type: minecraft:invisibility

      # Below is a second set of blocks with different loot.
      # Add as many sets as you want
    - blocks:
        - minecraft:gravel
      loot:
        - item:
            ==: org.bukkit.inventory.ItemStack
            v: 2230
            type: TNT
          weight: 1.0
        - item:
            ==: org.bukkit.inventory.ItemStack
            v: 2230
            type: AIR
            amount: 0
          weight: 10.0

  # By default, bomberman players cannot be hurt by anything except TNT
  # By configuring the below, specific damage causes can be allowed
  # The possible damage causes are listed here https://hub.spigotmc.org/javadocs/spigot/org/bukkit/event/entity/EntityDamageEvent.DamageCause.html
  # Values are specified as a regex and not case-sensitive.
  #
  # Each damage cause can be altered with different modifiers listed here: https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/event/entity/EntityDamageEvent.DamageModifier.html
  # Modifiers can be matched by regex (case-insensitive). Modifiers not matched will not be altered.
  # Modifiers that reduce damage taken will be negative.
  # If the value is specified on the damage cause, only the 'base' modifier will be altered.
  #
  # A special 'cancel' value can be specified that will cancel the event if a non-zero number is given.
  #
  # The damage specified is evaluated as a localisation message with the following arguments:
  #  - game: the current game data
  #  - player: the player affected
  #  - cause: the damage cause
  #  - final: the total damage that will be dealt
  #  - base: the damage done by the base modifier
  #  - damage: the modifiers damage to do (not applicable for 'cancel')
  #  - modifier: the modifier being altered (not applicable for 'cancel')
  damage-source:
    CUSTOM: {}                   # damage from bomberman explosions. 'Custom' is the only cause enabled by default
  # SUICIDE: {}                  # Allow use of the /kill command
  # HOT_FLOOR|CONTACT: 1         # Take one heart base damage from magma blocks and cactus and such
  # ENTITY_ATTACK:               # Allow players to attack each other with tools only (hands deal 1.5 max). Each hit will deal 1 heart
  #   base: '{#=|{damage}>=2}'
  #   (?!base).+: 0              # Disable other modifiers (e.g. armour)
  #   cancel: '{=|!{final}}'     # Cancel the event when not damaged
  # '*': {}                      # Allow everything


  # Materials listed here will not be pasted when building the schematic.
  # This is useful in irregular shaped buildings to keep e.g. the ground material.
  # It could also be used to keep some blocks from being reset each game.
  source-mask: []

  # Sets the block that surrounds spawn points
  cage-block: minecraft:white_stained_glass

  # Bomberman has four types of blocks:
  #  1. indestructible: tnt will not affect the block
  #  2. destructible: tnt will destroy the block, but progress no further
  #  3. pass-keep: tnt will pass through the block without changing the blocks state.
  #                Players inside pass-keep blocks will still be hit
  #  4. pass-destroy: tnt will pass through the block, ignite the block, then change into air
  #
  # Unless set otherwise:
  #  * All solid blocks are indestructible
  #  * All non-solid blocks are pass-destroy.
  # A solid block is defined as a block that has any hitbox that blocks the players movement
  #
  # All types will drop loot when destroyed if they are assigned in loot-table
  #
  # The assigned tnt fire type and air types are always pass-destroy and cannot be altered
  #
  # Note: The in-game configuration gui will "smart add" similar material ids (e.g wall_sign and sign).
  #  You have to add similar ids manually here

  # Blocks tnt will explode the first block of
  # Generally, blocks that are in the loot-table should be destructible
  # Removing tnt from destructible means tnt explosions will not chain together
  destructible:
    - minecraft:tnt
    - minecraft:snow_block
    - minecraft:dirt
    - minecraft:sand
    - minecraft:gravel

  # Blocks tnt cannot touch.
  # All solid blocks included by default
  indestructible: []

  # Blocks tnt will pass through, but not alter.
  # You might like to put your sensitive redstone, tripwires, signs, etc here
  pass-keep: []

  # Blocks tnt will pass through, ignite, and destroy
  # All non-solid blocks included by default
  # Will always include air types and the tnt fire type
  pass-destroy: []